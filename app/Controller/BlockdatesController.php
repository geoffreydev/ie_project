<?php	App::uses('AppController', 'Controller');     class BlockdatesController extends AppController{	public function index(){        if ($this->request->is('post')) {            $this->Blockdate->create();            $data = array();            $datesBlocked = $this->loopDates($this->request->data['Blockdate']['from'],$this->request->data['Blockdate']['to']);            foreach($datesBlocked as $date) {                array_push($data,array('dates'=>$date));            }            if($this->Blockdate->saveMany($data)) {                $this->Session->setFlash(__('Your Blockdates has been created'));            }        }    }		public function loopDates($from,$to)	{	    $blockdates = array();		$from = str_replace('/', '-', $from);		$start = strtotime($from);		$f =  date('Y-m-d', strtotime($from));				$to = str_replace('/', '-', $to);		$end = strtotime($to);		$t =  date('Y-m-d', strtotime($to));		$counter = 0;		// go from start timestamp to end timestamp adding # of sec in a day.		for($t=$start;$t<=$end;$t+=86400) {            // get the date for this timestamp.            $d = getdate($t);            $dd = $d['mday'];            $mm = $d['mon'];            $yy = $d['year'];            if($dd <10)            $dd = "0".$dd;            if($mm < 10)            $mm = "0".$mm;            $blockdates[$counter++] =  $yy.'-'.$mm.'-'.$dd;		}	return $blockdates;    }}